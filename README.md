# Anticrossing Analyzer Demo

Инструмент для анализа антикроссинга между модами ферромагнитного резонанса (FMR) и микроволнового резонатора на основе S-параметров.

## Описание

Этот проект реализует анализ экспериментальных данных S-параметров для изучения связи между магнонными модами и модами микроволнового резонатора. Программа выполняет:

- Загрузку и предварительную обработку экспериментальных данных S21 и S12
- Подгонку теоретической модели к экспериментальным спектрам
- Извлечение параметров связи (когерентной J и диссипативной Γ)
- Визуализацию результатов в виде контурных графиков и дисперсионных кривых
- Сохранение результатов в CSV формате

## Теоретическая модель

Используется модель связанных осцилляторов с комплексными коэффициентами связи:

```
S₂₁(ω,H) = α × |1/D(ω,H)|² + β
```

где дискриминант D(ω,H) описывает антикроссинг мод:

```
D = (ω - ωᵣ + iγᵣ)(ω - ωₘ(H) + iγₘ) - (J + iΓ)²
```

**Параметры модели:**
- `ωᵣ` - частота резонатора (ГГц)
- `ωₘ(H)` - частота магнонной моды, зависящая от поля (ГГц)
- `J` - когерентная связь (ГГц)
- `Γ` - диссипативная связь (ГГц)
- `γᵣ`, `γₘ` - затухания мод (ГГц)
- `α`, `β` - амплитудные факторы

## Структура проекта

```
Demo_Anticrossing_Analyzer/
├── config.py                 # Конфигурация параметров анализа
├── anticrossing_analyzer.py   # Основной модуль анализа
├── README.md                  # Документация
├── data/                      # Экспериментальные данные
│   ├── CoherentCoupling_S21.txt
│   └── CoherentCoupling_S12.txt
└── results/                   # Результаты анализа
    ├── anticrossing_analysis.log
    ├── extracted_parameters.csv
    ├── original_data_contour.png
    ├── fitted_data_contour.png
    ├── anticrossing_analysis.png
    ├── parameters_vs_field.png
    └── fit_quality.png
```

## Требования

- Python 3.8+
- NumPy
- SciPy
- Matplotlib
- Pandas

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/Alexus-D/Anticrossing-Analyzer-demo.git
cd Anticrossing-Analyzer-demo
```

2. Создайте виртуальное окружение:
```bash
python -m venv .venv
.venv\Scripts\activate  # Windows
source .venv/bin/activate  # Linux/Mac
```

3. Установите зависимости:
```bash
pip install numpy scipy matplotlib pandas
```

## Использование

### Базовый запуск

```bash
python anticrossing_analyzer.py
```

Скрипт автоматически:
1. Загружает данные из файла в папке `data/`
2. **Фильтрует проблемные данные** (например, строки с нулевым полем)
3. Выполняет подгонку теоретической модели
4. Создает визуализации результатов
5. Сохраняет параметры в CSV файлы

### Конфигурация системы

Основные параметры настраиваются в файле `config.py`:

#### Обработка данных
```python
IGNORE_LAST_ROW = True  # Автоматически исключать проблемные строки
MIN_FIELD_THRESHOLD = 10  # Минимальное значение поля (Э)
```

#### Параметры ФМР
```python
GYROMAGNETIC_RATIO = 2.8e-3  # Гиромагнитное отношение (ГГц/Э)
ANISOTROPY_FIELD = 0  # Поле анизотропии для сдвига частоты ФМР
```

### Настройка параметров

Отредактируйте файл `config.py` для изменения:
- Путей к файлам данных
- Параметров подгонки
- Настроек визуализации
- Начальных приближений для параметров

### Формат входных данных

Данные должны быть в табулированном формате:
- Первая строка: частоты (ГГц)
- Первый столбец: магнитные поля (Э)
- Остальные ячейки: значения S-параметров (дБ)

## Выходные файлы

### CSV файлы
- `extracted_parameters.csv` - извлеченные параметры для каждого поля
- `original_data.csv` - исходные экспериментальные данные

### Графики
- `original_data_contour.png` - контурный график исходных данных
- `fitted_data_contour.png` - контурный график подогнанных данных
- `anticrossing_analysis.png` - анализ антикроссинга с дисперсионными кривыми
- `parameters_vs_field.png` - зависимость параметров от поля
- `fit_quality.png` - качество подгонки (R²)

## Интерпретация результатов

### Параметры связи
- **J > 0**: Когерентная связь приводит к антикроссингу мод
- **Γ**: Диссипативная связь влияет на уширение линий
- **R²**: Коэффициент детерминации (качество подгонки)

### Дисперсионные кривые
- Видимое антикроссинг указывает на сильную связь мод
- Ширина щели антикроссинга ∝ |J|
- Асимметрия может указывать на диссипативную связь

## Примеры результатов

Для демонстрационных данных получены:
- Средняя когерентная связь: ~5-8 ГГц
- Средняя диссипативная связь: ~1-3 ГГц
- Качество подгонки R² > 0.5

## Разработка

### Структура кода
- `load_data()` - загрузка экспериментальных данных
- `theoretical_model()` - теоретическая модель S-параметров
- `fit_spectrum()` - подгонка спектра для одного поля
- `analyze_spectra()` - анализ всех спектров
- `create_visualizations()` - создание графиков

### Добавление новых моделей
Для добавления новой теоретической модели:
1. Реализуйте функцию модели в `config.py`
2. Добавьте соответствующие параметры подгонки
3. Обновите функцию визуализации при необходимости

## Лицензия

MIT License

## Контакты

Для вопросов и предложений создавайте issues в GitHub репозитории.

## Цитирование

При использовании в научных работах, пожалуйста, укажите:
```
Anticrossing Analyzer Demo - Tool for FMR-Resonator Coupling Analysis
GitHub: https://github.com/Alexus-D/Anticrossing-Analyzer-demo
```